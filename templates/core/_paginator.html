{% load animesuki %}
<ul class="pagination pagination-sm justify-content-center">
{% if page_obj.has_previous %}
    <li class="page-item"><a href="{{ view.get_url }}{% call_method view 'get_querystring' page=page_obj.previous_page_number %}" class="page-link"><i class="fas fa-chevron-left fa-fw"></i></a></li>
{% else %}
    <li class="page-item disabled"><a href="#" class="page-link" tabindex="-1"><i class="fas fa-chevron-left fa-fw"></i></a></li>
{% endif %}

{% if page_obj.number >= 3 and page_obj.paginator.num_pages > 3 %}
    <li class="page-item"><a href="{{ view.get_url }}{% call_method view 'get_querystring' page=1 %}" class="page-link">1</a></li>
    <li class="page-item disabled"><span class="page-link">...</span></li>
{% endif %}

{% if page_obj.number > 2 and page_obj.number == page_obj.paginator.num_pages %}
    <li class="page-item"><a href="{{ view.get_url }}{% call_method view 'get_querystring' page=page_obj.previous_page_number|add:-1 %}" class="page-link">{{ page_obj.previous_page_number|add:-1 }}</a></li>
{% endif %}

{% if page_obj.has_previous %}
    <li class="page-item"><a href="{{ view.get_url }}{% call_method view 'get_querystring' page=page_obj.previous_page_number %}" class="page-link">{{ page_obj.previous_page_number }}</a></li>
{% endif %}

    <li class="page-item active"><span class="page-link">{{ page_obj.number }}</span></li>

{% if page_obj.has_next %}
    <li class="page-item"><a href="{{ view.get_url }}{% call_method view 'get_querystring' page=page_obj.next_page_number %}" class="page-link">{{ page_obj.next_page_number }}</a></li>
{% endif %}

{% if page_obj.number == 1 and page_obj.paginator.num_pages >= 3 %}
    <li class="page-item"><a href="{{ view.get_url }}{% call_method view 'get_querystring' page=page_obj.next_page_number|add:1 %}" class="page-link">{{ page_obj.next_page_number|add:1 }}</a></li>
{% endif %}

{% if page_obj.has_next and page_obj.paginator.num_pages > 3 and page_obj.next_page_number != page_obj.paginator.num_pages %}
    <li class="page-item disabled"><span class="page-link">...</span></li>
    <li class="page-item"><a href="{{ view.get_url }}{% call_method view 'get_querystring' page=page_obj.paginator.num_pages %}" class="page-link">{{ page_obj.paginator.num_pages }}</a></li>
{% endif %}

{% if page_obj.has_next %}
    <li class="page-item"><a href="{{ view.get_url }}{% call_method view 'get_querystring' page=page_obj.next_page_number %}" class="page-link"><i class="fas fa-chevron-right fa-fw"></i></a></li>
{% else %}
    <li class="page-item disabled"><a href="#" class="page-link" tabindex="-1"><i class="fas fa-chevron-right fa-fw"></i></a></li>
{% endif %}
</ul>